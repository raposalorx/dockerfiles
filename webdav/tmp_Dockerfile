FROM fulsome/alpine:$FROM_VERSION
LABEL Maintainer="Brian Robertson <brian@fulso.me>" \
      Description="Minimal Webdav using nginx"

RUN apk add --no-cache nginx

RUN adduser -D -g 'www' www

RUN mkdir -p /data/www && \
    mkdir -p /data/client_temp && \
    chown -R www:www /data

ADD nginx.conf /etc/nginx/nginx.conf
ADD webdavpasswd /etc/nginx/webdavpasswd

VOLUME /data
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
